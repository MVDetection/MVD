static void run_externnotify(struct ast_channel *chan, struct minivm_account *vmu)
{
	char arguments[BUFSIZ];

	if (ast_strlen_zero(vmu->externnotify) && ast_strlen_zero(global_externnotify))
		return;

	snprintf(arguments, sizeof(arguments), "%s %s@%s %s %s&", 
		ast_strlen_zero(vmu->externnotify) ? global_externnotify : vmu->externnotify, 
		vmu->username, vmu->domain,
		(ast_channel_caller(chan)->id.name.valid && ast_channel_caller(chan)->id.name.str)
			? ast_channel_caller(chan)->id.name.str : "",
		(ast_channel_caller(chan)->id.number.valid && ast_channel_caller(chan)->id.number.str)
			? ast_channel_caller(chan)->id.number.str : "");

	ast_debug(1, "Executing: %s\n", arguments);
	ast_safe_system(arguments);
}