
static int sip_uri_headers_cmp(const char *input1, const char *input2)
{
	char *headers1 = ast_strdupa(input1);
	char *headers2 = ast_strdupa(input2);
	int zerolength1 = ast_strlen_zero(headers1);
	int zerolength2 = ast_strlen_zero(headers2);
	int different = 0;
	char *header1;
	if ((zerolength1 && !zerolength2) ||
			(zerolength2 && !zerolength1))
		return 1;
	if (zerolength1 && zerolength2)
		return 0;
	/* At this point, we can definitively state that both inputs are
	 * not zero-length. First, one more optimization. If the length
	 * of the headers is not equal, then we definitely have no match
	 */
	if (strlen(headers1) != strlen(headers2)) {
		return 1;
	}
	for (header1 = strsep(&headers1, "&"); header1; header1 = strsep(&headers1, "&")) {
		if (!strcasestr(headers2, header1)) {
			different = 1;
			break;
		}
	}
	return different;
}
	/* Headers have easier rules to follow, so do those first */
	if (sip_uri_headers_cmp(headers1, headers2)) {
		return 1;
	}
